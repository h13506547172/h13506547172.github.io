(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2730ed16"],{"10ec":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"hearder"},[n("span",{staticStyle:{display:"flex","margin-right":"10px"}},[n("span",{staticClass:"hight",staticStyle:{width:"100px"}},[e._v("点位搜索：")]),n("el-input",{attrs:{placeholder:"请输入",clearable:""},on:{clear:e.clearFn},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}})],1),n("span",{staticClass:"hight"},[e._v(" 区域搜索： "),n("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},on:{clear:e.clearFn},model:{value:e.searchInput2,callback:function(t){e.searchInput2=t},expression:"searchInput2"}},e._l(e.nodeList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("myBtn",{staticStyle:{"margin-left":"10px"},attrs:{bgc:"rgb(95, 132, 255)"},nativeOn:{click:function(t){return e.saerchBtn(t)}}},[n("i",{staticClass:"el-icon-search"}),e._v(" 查询")])],1)]),n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"btnB",staticStyle:{display:"flex"}},[n("myBtn",{attrs:{bgc:"linear-gradient(135deg, #ff9743, #ff5e20)"},nativeOn:{click:function(t){return e.addCreate(t)}}},[n("i",{staticClass:"el-icon-circle-plus-outline"}),e._v("新建")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"cell-style":{padding:"10px 0"},"header-cell-style":e.headerColor}},[n("el-table-column",{attrs:{prop:"taskId",label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1+e.indexOne)+" ")]}}])}),n("el-table-column",{attrs:{prop:"name",label:"点位名称"}}),n("el-table-column",{attrs:{prop:"nodeCount",label:"所在区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.region.name)+" ")]}}])}),n("el-table-column",{attrs:{prop:"remark",label:"商圈类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.businessType.name)+" ")]}}])}),n("el-table-column",{attrs:{prop:"ownerName",label:"合作商"}}),n("el-table-column",{attrs:{prop:"name",label:"详细地址"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"infoBtn",on:{click:function(n){return e.infoBtnFn(t.row)}}},[e._v("查看详情")]),n("span",{staticClass:"editBtn",on:{click:function(n){return e.editBtnFn(t.row)}}},[e._v("修改")]),n("span",{staticClass:"delBtn",on:{click:function(n){return e.delBtnFn(t.row)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.pageIndex,"page-size":10,layout:"total, prev, pager, next",total:e.totalCount},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}}),n("el-dialog",{staticClass:"borderR",attrs:{title:e.addTitle,visible:e.createVisible,width:"35%"},on:{"update:visible":function(t){e.createVisible=t},close:e.closeFn}},[n("el-form",{ref:"form",attrs:{model:e.myForm,"label-width":"110px",rules:e.rules}},[n("el-form-item",{attrs:{label:"点位名称：",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入",maxlength:"15","show-word-limit":""},model:{value:e.myForm.name,callback:function(t){e.$set(e.myForm,"name",t)},expression:"myForm.name"}})],1),n("el-form-item",{attrs:{label:"所在区域：",prop:"regionId"}},[n("span",{staticClass:"hight"},[n("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.myForm.regionId,callback:function(t){e.$set(e.myForm,"regionId",t)},expression:"myForm.regionId"}},e._l(e.nodeList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),n("el-form-item",{attrs:{label:"所属商圈：",prop:"businessId"}},[n("span",{staticClass:"hight"},[n("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.myForm.businessId,callback:function(t){e.$set(e.myForm,"businessId",t)},expression:"myForm.businessId"}},e._l(e.businessTypeList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),n("el-form-item",{attrs:{label:"归属合作商：",prop:"ownerId"}},[n("span",{staticClass:"hight"},[n("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:e.getOwnerIdFn},model:{value:e.myForm.ownerId,callback:function(t){e.$set(e.myForm,"ownerId",t)},expression:"myForm.ownerId"}},e._l(e.partnerList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),n("el-form-item",{attrs:{label:"详细地址：",prop:"addrInfo"}},[e.isShowcascader?n("el-cascader",{attrs:{placeholder:"请选择",size:"large",options:e.options,props:{label:"label",value:"label"},filterable:""},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}}):e._e(),n("el-input",{attrs:{maxlength:"60","show-word-limit":"",type:"textarea",placeholder:"请输入详细地址",autosize:{minRows:3}},model:{value:e.myForm.addrInfo,callback:function(t){e.$set(e.myForm,"addrInfo",t)},expression:"myForm.addrInfo"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"popCanBtn",on:{click:function(t){e.createVisible=!1}}},[e._v("取 消")]),n("el-button",{staticClass:"popConBtn",attrs:{type:"primary"},on:{click:e.createConf}},[e._v(" 确 认 ")])],1)],1)],1),n("infoPop",{attrs:{infoVisible:e.infoVisible,info:e.info,infoName:e.infoName},on:{"update:infoVisible":function(t){e.infoVisible=t},"update:info-visible":function(t){e.infoVisible=t}}})],1)},a=[],s=n("c7eb"),o=n("1da1"),i=(n("a15b"),n("4de4"),n("d3b7"),n("b0c0"),n("ac1f"),n("1276"),n("498a"),n("6f9d")),c=n("ef6c"),l=n("244d"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"borderR",attrs:{title:"点位详情",visible:e.infoVisible,width:"35%"},on:{close:e.onClose}},[n("el-form",{ref:"form",attrs:{"label-width":"100px"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.info,"empty-text":"暂无数据","header-cell-style":e.headerColor,"cell-style":e.cellStyle,"row-class-name":e.tableRowClassName}},[n("el-table-column",{attrs:{label:"序号",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),n("el-table-column",{attrs:{prop:"innerCode",label:"机器编号"}}),n("el-table-column",{attrs:{prop:"vmStatus",label:"设备状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s({0:"未投放",1:"运营",3:"撤机"}[t.row.vmStatus])+" ")]}}])}),n("el-table-column",{attrs:{label:"最后一次供货时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.lastSupplyTime.replace(/T/gi," ").replace(/-/gi,"."))+" ")]}}])})],1)],1)],1)},d=[],m={name:"infoPop",props:{infoVisible:{type:Boolean},info:{type:Array,required:!0},infoName:{type:String,required:!0}},data:function(){return{infoList:{}}},created:function(){},mounted:function(){},methods:{onClose:function(){this.$emit("update:infoVisible",!1)},headerColor:function(){return"background:rgb(243,246,251)"},cellStyle:function(){return"background:rgb(252,253,254)"},tableRowClassName:function(){return"highlight-row"}}},p=m,f=n("2877"),b=Object(f["a"])(p,u,d,!1,null,"947b83d0",null),h=b.exports,g={name:"node",data:function(){return{myForm:{name:"",regionId:"",businessId:"",ownerId:"",ownerName:"",addr:"",addrInfo:"",id:""},owner:{},partnerList:[],businessTypeList:[],infoVisible:!1,dialogVisible:!1,createVisible:!1,searchInput:"",searchInput2:"",pageSize:10,pageIndex:1,list:[],num:0,totalCount:0,indexOne:0,info:[],infoName:"",addTitle:"新增区域",editcontent:null,rules:{name:[{required:!0,message:"请输入",trigger:"blur"}],regionId:[{required:!0,message:"请输入",trigger:"change"}],businessId:[{required:!0,message:"请输入",trigger:"change"}],ownerId:[{required:!0,message:"请输入",trigger:"change"}],ownerName:[{required:!0,message:"请输入",trigger:"blur"}],addrInfo:[{required:!0,message:"请输入",trigger:"blur"}]},nodeList:[],searchInputRes:"",options:c["regionData"],selectedOptions:[],isShowcascader:!0}},computed:{},components:{myBtn:i["a"],infoPop:h},created:function(){this.getNodeType(),this.getNodeList()},methods:{handleChange:function(e){this.myForm.addr=e.join("-")},closeFn:function(){},getOwnerIdFn:function(e){var t=this.partnerList.filter((function(t){return t.id==e}));this.myForm.ownerName=t[0].name},clearFn:function(){this.indexOne=0,this.searchInputRes="",this.getNodeList()},addCreate:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var n,r,a,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.selectedOptions="",e.myForm={name:"",regionId:"",businessId:"",ownerId:"",ownerName:"",addr:"",addrInfo:"",id:""},t.next=4,Object(l["j"])();case 4:return n=t.sent,r=n.data,e.businessTypeList=r,t.next=9,Object(l["m"])();case 9:a=t.sent,o=a.data.currentPageRecords,e.partnerList=o,e.addTitle="新增点位",e.createVisible=!0,e.$nextTick((function(){e.$refs.form.clearValidate()}));case 15:case"end":return t.stop()}}),t)})))()},infoBtnFn:function(e){var t=this;return Object(o["a"])(Object(s["a"])().mark((function n(){var r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(l["p"])(e.id);case 2:r=n.sent,t.info=r.data,t.infoVisible=!0;case 5:case"end":return n.stop()}}),n)})))()},editBtnFn:function(e){var t=this;return Object(o["a"])(Object(s["a"])().mark((function n(){var r,a,o,i,c,u;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.createVisible=!0,t.myForm.name=e.name,t.myForm.regionId=e.regionId,t.myForm.businessId=e.businessType.id,t.myForm.ownerId=e.ownerId,t.myForm.ownerName=e.ownerName,t.myForm.id=e.id,r=e.addr.substring(e.addr.lastIndexOf("-")+1),t.myForm.addrInfo=r,t.myForm.addr=e.addr.substring(0,e.addr.lastIndexOf("-")),a=e.addr.substring(0,e.addr.lastIndexOf("-")),a=a.split("-"),t.selectedOptions=a,n.next=15,Object(l["j"])();case 15:return o=n.sent,i=o.data,t.businessTypeList=i,n.next=20,Object(l["m"])();case 20:c=n.sent,u=c.data.currentPageRecords,t.partnerList=u,t.addTitle="修改点位";case 24:case"end":return n.stop()}}),n)})))()},delBtnFn:function(e){var t=this;return Object(o["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(l["d"])(e.id);case 3:t.$message.success("删除成功~"),t.pageIndex=1,t.pageSize=10,t.indexOne=0,t.getNodeList(),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](0);case 12:case"end":return n.stop()}}),n,null,[[0,10]])})))()},saerchBtn:function(){this.searchInput=this.searchInput.trim(),this.searchInputRes=this.searchInput,this.pageIndex=1,this.pageSize=10,this.indexOne=0,this.loadPageFn()},loadPageFn:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var n,r,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={pageIndex:e.pageIndex,pageSize:e.pageSize,name:e.searchInputRes,regionId:e.searchInput2},t.prev=1,t.next=4,Object(l["k"])(n);case 4:r=t.sent,a=r.data,e.list=a.currentPageRecords,e.totalCount=+a.totalCount,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.$message.error("请求失败");case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},createConf:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:e.createVisible=!1,e.addPlaceList(),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},headerColor:function(){return"background:rgb(243,246,251)"},handleCurrentChange:function(e){this.indexOne=10*(e-1),this.loadPageFn()},getNodeList:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var n,r,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={pageIndex:1,pageSize:10},t.prev=1,t.next=4,Object(l["k"])(n);case 4:r=t.sent,a=r.data,e.list=a.currentPageRecords,e.totalCount=+a.totalCount,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.$message.error("请求失败");case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},getNodeType:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var n,r,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={pageIndex:1,pageSize:1e3},t.prev=1,t.next=4,Object(l["o"])(n);case 4:r=t.sent,a=r.data,e.nodeList=a.currentPageRecords,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$message.error("请求失败");case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},addPlaceList:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var n,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,"新增点位"!=e.addTitle){t.next=12;break}return n={name:e.myForm.name,regionId:e.myForm.regionId,businessId:e.myForm.businessId,ownerId:e.myForm.ownerId,ownerName:e.myForm.ownerName,addr:e.myForm.addr+"-"+e.myForm.addrInfo,createUserId:1},t.next=5,Object(l["a"])(n);case 5:e.$message.success("添加成功~"),e.pageSize=10,e.pageIndex=1,e.indexOne=0,e.getNodeList(),t.next=17;break;case 12:return r={name:e.myForm.name,regionId:e.myForm.regionId,businessId:e.myForm.businessId,ownerId:e.myForm.ownerId,ownerName:e.myForm.ownerName,addr:e.myForm.addr+"-"+e.myForm.addrInfo,createUserId:e.$store.state.user.userId},t.next=15,Object(l["g"])(e.myForm.id,r);case 15:e.$message.success("修改成功~"),e.loadPageFn();case 17:t.next=21;break;case 19:t.prev=19,t.t0=t["catch"](0);case 21:case"end":return t.stop()}}),t,null,[[0,19]])})))()}}},v=g,y=(n("d4f6"),n("5e75"),Object(f["a"])(v,r,a,!1,null,"02e71973",null));t["default"]=y.exports},"244d":function(e,t,n){"use strict";n.d(t,"o",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"n",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"k",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"m",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"g",(function(){return p})),n.d(t,"p",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"l",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"q",(function(){return y})),n.d(t,"e",(function(){return w}));var r=n("b775");function a(e){return Object(r["a"])({url:"vm-service/region/search",method:"get",params:e})}function s(e){return Object(r["a"])({url:"vm-service/region",method:"POST",data:e})}function o(e){return Object(r["a"])({url:"vm-service/node/search",method:"GET",params:{regionId:e}})}function i(e,t){return Object(r["a"])({url:"vm-service/region/".concat(e),method:"PUT",data:t})}function c(e){return Object(r["a"])({url:"vm-service/region/".concat(e),method:"DELETE"})}function l(e){return Object(r["a"])({url:"vm-service/node/search",method:"GET",params:e})}function u(){return Object(r["a"])({url:"vm-service/businessType",method:"GET"})}function d(){return Object(r["a"])({url:"user-service/partner/search",method:"GET",params:{pageSize:1e5}})}function m(e){return Object(r["a"])({url:"vm-service/node",method:"POST",data:e})}function p(e,t){return Object(r["a"])({url:"vm-service/node/".concat(e),method:"PUT",data:t})}function f(e){return Object(r["a"])({url:"vm-service/node/vmList/".concat(e),method:"GET"})}function b(e){return Object(r["a"])({url:"vm-service/node/".concat(e),method:"DELETE"})}function h(e){return Object(r["a"])({url:"user-service/partner/search",method:"GET",params:e})}function g(e){return Object(r["a"])({url:"user-service/partner",method:"POST",data:e})}function v(e,t){return Object(r["a"])({url:"user-service/partner/".concat(e),method:"PUT",data:t})}function y(e){return Object(r["a"])({url:"user-service/partner/resetPwd/".concat(e),method:"PUT"})}function w(e){return Object(r["a"])({url:"user-service/partner/".concat(e),method:"DELETE"})}},"523f":function(e,t,n){},"5d0b":function(e,t,n){},"5e75":function(e,t,n){"use strict";n("94ec")},"6f9d":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{staticClass:"mybtn1",class:e.type,style:{border:0,background:e.bgc,color:e.color}},[e._t("default",[e._v("按钮")])],2)],1)},a=[],s={props:{bgc:{type:String,default:"black"},color:{type:String,default:"#fff"},type:{type:String,default:""}},data:function(){return{}},created:function(){},methods:{}},o=s,i=(n("d76b"),n("2877")),c=Object(i["a"])(o,r,a,!1,null,"73ce4aea",null);t["a"]=c.exports},"94ec":function(e,t,n){},d4f6:function(e,t,n){"use strict";n("523f")},d76b:function(e,t,n){"use strict";n("5d0b")}}]);