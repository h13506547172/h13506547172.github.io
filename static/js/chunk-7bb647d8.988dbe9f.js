(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bb647d8"],{1840:function(e,t,n){},"244d":function(e,t,n){"use strict";n.d(t,"o",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"n",(function(){return o})),n.d(t,"i",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"k",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"m",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"g",(function(){return p})),n.d(t,"p",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"l",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"q",(function(){return y})),n.d(t,"e",(function(){return x}));var r=n("b775");function a(e){return Object(r["a"])({url:"vm-service/region/search",method:"get",params:e})}function i(e){return Object(r["a"])({url:"vm-service/region",method:"POST",data:e})}function o(e){return Object(r["a"])({url:"vm-service/node/search",method:"GET",params:{regionId:e}})}function c(e,t){return Object(r["a"])({url:"vm-service/region/".concat(e),method:"PUT",data:t})}function s(e){return Object(r["a"])({url:"vm-service/region/".concat(e),method:"DELETE"})}function l(e){return Object(r["a"])({url:"vm-service/node/search",method:"GET",params:e})}function u(){return Object(r["a"])({url:"vm-service/businessType",method:"GET"})}function d(){return Object(r["a"])({url:"user-service/partner/search",method:"GET",params:{pageSize:1e5}})}function m(e){return Object(r["a"])({url:"vm-service/node",method:"POST",data:e})}function p(e,t){return Object(r["a"])({url:"vm-service/node/".concat(e),method:"PUT",data:t})}function f(e){return Object(r["a"])({url:"vm-service/node/vmList/".concat(e),method:"GET"})}function b(e){return Object(r["a"])({url:"vm-service/node/".concat(e),method:"DELETE"})}function h(e){return Object(r["a"])({url:"user-service/partner/search",method:"GET",params:e})}function g(e){return Object(r["a"])({url:"user-service/partner",method:"POST",data:e})}function v(e,t){return Object(r["a"])({url:"user-service/partner/".concat(e),method:"PUT",data:t})}function y(e){return Object(r["a"])({url:"user-service/partner/resetPwd/".concat(e),method:"PUT"})}function x(e){return Object(r["a"])({url:"user-service/partner/".concat(e),method:"DELETE"})}},4421:function(e,t,n){},"4a33":function(e,t,n){},"5d0b":function(e,t,n){},"6f9d":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{staticClass:"mybtn1",class:e.type,style:{border:0,background:e.bgc,color:e.color}},[e._t("default",[e._v("按钮")])],2)],1)},a=[],i={props:{bgc:{type:String,default:"black"},color:{type:String,default:"#fff"},type:{type:String,default:""}},data:function(){return{}},created:function(){},methods:{}},o=i,c=(n("d76b"),n("2877")),s=Object(c["a"])(o,r,a,!1,null,"73ce4aea",null);t["a"]=s.exports},a3a2:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"hearder"},[n("span",{staticStyle:{display:"flex","margin-right":"10px"}},[n("span",{staticClass:"hight",staticStyle:{width:"100px"}},[e._v("区域搜索：")]),n("el-input",{attrs:{placeholder:"请输入",clearable:""},on:{clear:e.clearFn},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}})],1),n("myBtn",{attrs:{bgc:"rgb(95, 132, 255)"},nativeOn:{click:function(t){return e.saerchBtn(t)}}},[n("i",{staticClass:"el-icon-search"}),e._v(" 查询")])],1)]),n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"btnB",staticStyle:{display:"flex"}},[n("myBtn",{attrs:{bgc:"linear-gradient(135deg, #ff9743, #ff5e20)"},nativeOn:{click:function(t){return e.addCreate(t)}}},[n("i",{staticClass:"el-icon-circle-plus-outline"}),e._v("新建")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"cell-style":{padding:"10px 0"},"header-cell-style":e.headerColor}},[n("el-table-column",{attrs:{prop:"taskId",label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1+e.indexOne)+" ")]}}])}),n("el-table-column",{attrs:{prop:"name",label:"合作商名称"}}),n("el-table-column",{attrs:{prop:"account",label:"账号"}}),n("el-table-column",{attrs:{prop:"vmCount",label:"设备数量"}}),n("el-table-column",{attrs:{prop:"ratio",label:"分成比例"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.ratio+"%")+" ")]}}])}),n("el-table-column",{attrs:{prop:"contact",label:"联系人"}}),n("el-table-column",{attrs:{prop:"mobile",label:"联系电话"}}),n("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"infoBtn",on:{click:function(n){return e.restBtnFn(t.row)}}},[e._v("重置密码")]),n("span",{staticClass:"infoBtn",on:{click:function(n){return e.infoBtnFn(t.row)}}},[e._v("查看详情")]),n("span",{staticClass:"editBtn",on:{click:function(n){return e.editBtnFn(t.row)}}},[e._v("修改")]),n("span",{staticClass:"delBtn",on:{click:function(n){return e.delBtnFn(t.row)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.pageIndex,"page-size":10,layout:"total, prev, pager, next",total:e.totalCount},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t}}}),n("el-dialog",{staticClass:"borderR",attrs:{title:e.addTitle,visible:e.createVisible,width:"35%"},on:{"update:visible":function(t){e.createVisible=t},close:e.closeFn}},[n("el-form",{ref:"form",attrs:{model:e.myForm,"label-width":"120px",rules:e.rules}},[n("el-form-item",{attrs:{label:"合作商名称：",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.myForm.name,callback:function(t){e.$set(e.myForm,"name",t)},expression:"myForm.name"}})],1),n("el-form-item",{attrs:{label:"联系人：",prop:"contact"}},[n("el-input",{attrs:{placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.myForm.contact,callback:function(t){e.$set(e.myForm,"contact",t)},expression:"myForm.contact"}})],1),n("el-form-item",{attrs:{label:"联系电话：",prop:"mobile"}},[n("el-input",{attrs:{placeholder:"请输入",maxlength:"11","show-word-limit":""},model:{value:e.myForm.mobile,callback:function(t){e.$set(e.myForm,"mobile",t)},expression:"myForm.mobile"}})],1),n("el-form-item",{attrs:{label:"分成比例(%)：",prop:"ratio"}},[n("el-input-number",{staticClass:"widthIsMax",attrs:{"controls-position":"right",placeholder:"请输入",min:0,max:100},model:{value:e.myForm.ratio,callback:function(t){e.$set(e.myForm,"ratio",t)},expression:"myForm.ratio"}})],1),"新增合作商"==e.addTitle?n("div",[n("el-form-item",{attrs:{label:"账号：",prop:"account"}},[n("el-input",{attrs:{placeholder:"请输入",maxlength:"18","show-word-limit":""},model:{value:e.myForm.account,callback:function(t){e.$set(e.myForm,"account",t)},expression:"myForm.account"}})],1),n("el-form-item",{attrs:{label:"密码：",prop:"password"}},[n("el-input",{attrs:{placeholder:"请输入",maxlength:"20","show-word-limit":""},model:{value:e.myForm.password,callback:function(t){e.$set(e.myForm,"password",t)},expression:"myForm.password"}})],1)],1):e._e()],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"popCanBtn",on:{click:function(t){e.createVisible=!1}}},[e._v("取 消")]),n("el-button",{staticClass:"popConBtn",attrs:{type:"primary"},on:{click:e.createConf}},[e._v(" 确 认 ")])],1)],1)],1),n("infoPop",{attrs:{infoVisible:e.infoVisible,info:e.info,infoName:e.infoName,infoMan:e.infoMan,infoNumb:e.infoNumb,infoRatio:e.infoRatio},on:{"update:infoVisible":function(t){e.infoVisible=t},"update:info-visible":function(t){e.infoVisible=t}}})],1)},a=[],i=n("c7eb"),o=n("1da1"),c=(n("b0c0"),n("498a"),n("6f9d")),s=n("244d"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"borderR",attrs:{title:"合作商详情",visible:e.infoVisible,width:"35%"},on:{close:e.onClose}},[n("div",{staticClass:"container"},[n("div",{staticClass:"text"},[n("span",[e._v("合作商名称："+e._s(e.infoName))]),n("span",[e._v("联系人："+e._s(e.infoMan))])]),n("div",{staticClass:"text"},[n("span",[e._v("联系电话："+e._s(e.infoNumb))]),n("span",[e._v("分成比例："+e._s(e.infoRatio))])])])])},u=[],d={name:"infoPop",props:{infoVisible:{type:Boolean},info:{type:Array,required:!0},infoName:{type:String,required:!0},infoMan:{type:String,required:!0},infoNumb:{type:String,required:!0},infoRatio:{type:String,required:!0}},data:function(){return{infoList:{}}},computed:{},created:function(){},mounted:function(){},methods:{onClose:function(){this.$emit("update:infoVisible",!1)},headerColor:function(){return"background:rgb(243,246,251)"},cellStyle:function(){return"background:rgb(252,253,254)"},tableRowClassName:function(){return"highlight-row"}}},m=d,p=(n("c4a9"),n("2877")),f=Object(p["a"])(m,l,u,!1,null,"309264f3",null),b=f.exports,h={name:"partner",components:{myBtn:c["a"],infoPop:b},data:function(){return{infoMan:"",infoNumb:"",infoRatio:"",myForm:{name:"",contact:"",mobile:"",ratio:void 0,account:"",password:""},infoVisible:!1,dialogVisible:!1,createVisible:!1,searchInput:"",pageSize:10,pageIndex:1,list:[],num:0,totalCount:0,indexOne:0,editId:null,info:[],infoName:"",addTitle:"新增合作商",editcontent:null,rules:{regionName:[{required:!0,message:"请输入",trigger:"blur"}],remark:[{required:!0,message:"请输入",trigger:"blur"}],name:[{required:!0,message:"请输入",trigger:"blur"}],contact:[{required:!0,message:"请输入",trigger:"blur"}],mobile:[{required:!0,message:"请输入",trigger:"blur"},{pattern:/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,message:"手机号不规范",trigger:"blur"}],ratio:[{required:!0,message:"请输入",trigger:"blur"}],account:[{required:!0,message:"请输入",trigger:"blur"}],password:[{required:!0,message:"请输入",trigger:"blur"}]},searchInputRes:""}},created:function(){this.getPlaceList()},methods:{closeFn:function(){this.myForm={name:"",contact:"",mobile:"",ratio:void 0,account:"",password:""}},clearFn:function(){this.indexOne=0,this.searchInputRes="",this.getPlaceList()},addCreate:function(){this.addTitle="新增合作商",this.createVisible=!0},restBtnFn:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$confirm("确定要重置合作商密码吗？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["q"])(e.id);case 2:n.sent,t.$message({type:"success",message:"重置成功!"});case 4:case"end":return n.stop()}}),n)})))).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()},infoBtnFn:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.infoMan=e.contact,t.infoNumb=e.mobile,t.infoRatio=e.ratio+"%",t.infoName=e.name,t.infoVisible=!0;case 5:case"end":return n.stop()}}),n)})))()},editBtnFn:function(e){this.editId=e.id,this.myForm.name=e.name,this.myForm.contact=e.contact,this.myForm.mobile=e.mobile,this.myForm.ratio=e.ratio,this.myForm.account=e.account,this.myForm.password=e.password,this.addTitle="修改合作商",this.createVisible=!0},delBtnFn:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(s["e"])(e.id);case 3:t.$message.success("删除成功~"),t.pageIndex=1,t.pageSize=10,t.indexOne=0,t.getPlaceList(),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](0);case 12:case"end":return n.stop()}}),n,null,[[0,10]])})))()},saerchBtn:function(){this.searchInput=this.searchInput.trim(),this.searchInputRes=this.searchInput,this.pageIndex=1,this.pageSize=10,this.indexOne=0,this.loadPageFn()},loadPageFn:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n,r,a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={pageIndex:e.pageIndex,pageSize:e.pageSize,name:e.searchInputRes},t.prev=1,t.next=4,Object(s["l"])(n);case 4:r=t.sent,a=r.data,e.list=a.currentPageRecords,e.totalCount=+a.totalCount,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.$message.error("请求失败");case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},createConf:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:e.createVisible=!1,e.addPlaceList(),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},headerColor:function(){return"background:rgb(243,246,251)"},handleCurrentChange:function(e){this.indexOne=10*(e-1),this.loadPageFn()},getPlaceList:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n,r,a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={pageIndex:1,pageSize:10},t.prev=1,t.next=4,Object(s["l"])(n);case 4:r=t.sent,a=r.data,e.list=a.currentPageRecords,e.totalCount=+a.totalCount,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.$message.error("请求失败");case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},addPlaceList:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n={name:e.myForm.name,contact:e.myForm.contact,mobile:e.myForm.mobile,ratio:e.myForm.ratio,account:e.myForm.account,password:e.myForm.password},"新增合作商"!=e.addTitle){t.next=12;break}return t.next=5,Object(s["b"])(n);case 5:e.$message.success("添加成功~"),e.pageSize=10,e.pageIndex=1,e.indexOne=0,e.getPlaceList(),t.next=17;break;case 12:return r={name:e.myForm.name,contact:e.myForm.contact,mobile:e.myForm.mobile,ratio:e.myForm.ratio},t.next=15,Object(s["h"])(e.editId,r);case 15:e.$message.success("修改成功~"),e.loadPageFn();case 17:t.next=21;break;case 19:t.prev=19,t.t0=t["catch"](0);case 21:case"end":return t.stop()}}),t,null,[[0,19]])})))()}}},g=h,v=(n("ec74"),n("e31d"),Object(p["a"])(g,r,a,!1,null,"df5ded38",null));t["default"]=v.exports},c4a9:function(e,t,n){"use strict";n("4a33")},d76b:function(e,t,n){"use strict";n("5d0b")},e31d:function(e,t,n){"use strict";n("4421")},ec74:function(e,t,n){"use strict";n("1840")}}]);